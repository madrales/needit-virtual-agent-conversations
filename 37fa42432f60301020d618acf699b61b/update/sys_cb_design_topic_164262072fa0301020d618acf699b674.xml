<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">1a4262072fa0301020d618acf699b671</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"80a08f073c84446ab32fd3747570e62f","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"80a08f073c84446ab32fd3747570e62f"}],"goals":[{"name":"primary","trigger_id":"80a08f073c84446ab32fd3747570e62f","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Hello, {0}! Select a record type to get started\", vaContext.getRequesterLang(), [vaInputs.user])"},"id":"e6c0dcc5319e4414b0c4f3efe916db93","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"67c7fb6491054cdfaf40895696772714","name":"End"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"0cde9a211d294fa487f4c760acc2522b","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"a60fbe894bc541328b55fa57a2eb66da","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view.\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"a60fbe894bc541328b55fa57a2eb66da","fields":["priority","short_description","u_when_needed"],"id":"363e938b61aa4a3fa08c18ebcc6ce308","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"InputPrompt","variable_id":"4002aa4cc56f481ab24b532e275d7dea","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"ffbcdf18fa8e443a94988ff05caae2b1","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"bf75a73b75224865be5edc9366ec9772","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"130a43cf6be74d94bf77319b707ad8f2","name":"Yes"}],"id":"dcc3244106dd442f933730931f981238","goal_id":"primary"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"497dad0ea5d04b63aff5ef2e6e75e1d8","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"94b940aa83994bcbb39cead874b17ed0","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What type of record are you looking for?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()\n"},"id":"4f61be05b74a4d6ba38aaa1d49a4ce3f","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"InputPrompt","variable_id":"5dffd9eb43f54cd383f31264643d6da9","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"5c688379609b42c18a0446232d091858","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"field_change_selector=when needed"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"a60fbe894bc541328b55fa57a2eb66da","id":"7a7fb9b5b7cb4794941dcf1fb3f64173","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"a60fbe894bc541328b55fa57a2eb66da","fields":["u_when_needed","short_description"],"id":"6db92a4787ac4975a4b2772ddfe602bd","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"field_change_selector=short description^ORfield_change_selector=when needed"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"81f7fe0b7de7479f995ad15bd2a3372b","name":"Field Change Selector","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"ee32be51dd324f2089aecde477119e04","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which field would you like to change?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"When needed","expression":{"type":"Applicability","mode":"query","value":"field_change_selector=when needed"},"id":"e22cf5679fda441083916286069906aa","name":"When needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"field_change_selector=nothing"},"id":"3209f5d80dfe4712b60080fa111c55f6","name":"Nothing"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"field_change_selector=short description"},"id":"7db2a099985e4f4a8c1480f7d4ac2ccb","name":"Short description"}],"id":"a6fd9832a18f44a091649583ee77695b","goal_id":"primary"},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"a60fbe894bc541328b55fa57a2eb66da","id":"1f4df73889614cafb3fb0f4f88861f93","name":"Change Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"1d4b6b0c5be446b0a994f3e5c35c4a60","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like the new short description to be?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"5306eed984294e10b6a32bcee3abc8da","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"field_change_selector=short description"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"e66fa14109d740bbb3e83d2de43b622a","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"query","value":""},"id":"a27fe147c55847d4aa07459673b4b98d","name":"Less than 3"},{"type":"Branch","label":"3 or more","expression":{"type":"Applicability","mode":"query","value":""},"id":"95516fd211e34f5fab7a138c14f52712","name":"3 or more"}],"id":"f749c7aa6651482680260d344c08b2d9","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"f749c7aa6651482680260d344c08b2d9","target_node_id":"497dad0ea5d04b63aff5ef2e6e75e1d8","branch_id":"a27fe147c55847d4aa07459673b4b98d","id":"a6d015d38fdb4c80afeb1a45af7c3de5","name":"a27fe147c55847d4aa07459673b4b98d"},{"type":"Edge","source_node_id":"e6c0dcc5319e4414b0c4f3efe916db93","target_node_id":"497dad0ea5d04b63aff5ef2e6e75e1d8","id":"9e279a54431a49388381931f15c4fd65"},{"type":"Edge","source_node_id":"0cde9a211d294fa487f4c760acc2522b","target_node_id":"363e938b61aa4a3fa08c18ebcc6ce308","id":"2082697b2d704b90a9e3252990f866ae"},{"type":"Edge","source_node_id":"ffbcdf18fa8e443a94988ff05caae2b1","target_node_id":"dcc3244106dd442f933730931f981238","id":"588fd44fe1874df98f59d3bfe9762923"},{"type":"Edge","source_node_id":"dcc3244106dd442f933730931f981238","target_node_id":"67c7fb6491054cdfaf40895696772714","branch_id":"bf75a73b75224865be5edc9366ec9772","id":"dc00e01f682c4ef49406aedebc2a06a7","name":"bf75a73b75224865be5edc9366ec9772"},{"type":"Edge","source_node_id":"497dad0ea5d04b63aff5ef2e6e75e1d8","target_node_id":"4f61be05b74a4d6ba38aaa1d49a4ce3f","id":"07f7dda4a1624bd1bc9934d7c642c6ab"},{"type":"Edge","source_node_id":"4f61be05b74a4d6ba38aaa1d49a4ce3f","target_node_id":"0cde9a211d294fa487f4c760acc2522b","id":"54aa82eff67f4b23b1fba96c50da6c9b"},{"type":"Edge","source_node_id":"5c688379609b42c18a0446232d091858","target_node_id":"7a7fb9b5b7cb4794941dcf1fb3f64173","id":"42638cfd64c9434eae1bb834c9ea86d5"},{"type":"Edge","source_node_id":"7a7fb9b5b7cb4794941dcf1fb3f64173","target_node_id":"6db92a4787ac4975a4b2772ddfe602bd","id":"827f330449264dcfaa5aa2eef30a9d5c"},{"type":"Edge","source_node_id":"6db92a4787ac4975a4b2772ddfe602bd","target_node_id":"ffbcdf18fa8e443a94988ff05caae2b1","id":"33ebcb638f59483e952cb3290334266d"},{"type":"Edge","source_node_id":"363e938b61aa4a3fa08c18ebcc6ce308","target_node_id":"81f7fe0b7de7479f995ad15bd2a3372b","id":"5b462222decf46f990b9ad52685af246"},{"type":"Edge","source_node_id":"81f7fe0b7de7479f995ad15bd2a3372b","target_node_id":"a6fd9832a18f44a091649583ee77695b","id":"82230b4965484c1bb19c42fd973042ad"},{"type":"Edge","source_node_id":"a6fd9832a18f44a091649583ee77695b","target_node_id":"5c688379609b42c18a0446232d091858","branch_id":"e22cf5679fda441083916286069906aa","id":"e1f96155863f4927957a2a9b190068d1","name":"e22cf5679fda441083916286069906aa"},{"type":"Edge","source_node_id":"a6fd9832a18f44a091649583ee77695b","target_node_id":"ffbcdf18fa8e443a94988ff05caae2b1","branch_id":"3209f5d80dfe4712b60080fa111c55f6","id":"3f6b519f8c0349e4be80279f24282d7a","name":"3209f5d80dfe4712b60080fa111c55f6"},{"type":"Edge","source_node_id":"1f4df73889614cafb3fb0f4f88861f93","target_node_id":"6db92a4787ac4975a4b2772ddfe602bd","id":"840f951ee8c541fca57f87a10997dcd6"},{"type":"Edge","source_node_id":"a6fd9832a18f44a091649583ee77695b","target_node_id":"5306eed984294e10b6a32bcee3abc8da","branch_id":"7db2a099985e4f4a8c1480f7d4ac2ccb","id":"8dd97459e92c4813acd2dc2518b303a8","name":"7db2a099985e4f4a8c1480f7d4ac2ccb"},{"type":"Edge","source_node_id":"5306eed984294e10b6a32bcee3abc8da","target_node_id":"1f4df73889614cafb3fb0f4f88861f93","id":"08b5adc3c4f1416bbf551bc3f1fdb796"},{"type":"Edge","source_node_id":"dcc3244106dd442f933730931f981238","target_node_id":"e66fa14109d740bbb3e83d2de43b622a","branch_id":"130a43cf6be74d94bf77319b707ad8f2","id":"b0fb0bd3c9f64b42b82d377f049490a3","name":"130a43cf6be74d94bf77319b707ad8f2"},{"type":"Edge","source_node_id":"e66fa14109d740bbb3e83d2de43b622a","target_node_id":"f749c7aa6651482680260d344c08b2d9","id":"b0bb37b75f4d4d1880d195e533b8238e"},{"type":"Edge","source_node_id":"f749c7aa6651482680260d344c08b2d9","target_node_id":"67c7fb6491054cdfaf40895696772714","branch_id":"95516fd211e34f5fab7a138c14f52712","id":"eb57a6a5e5ac4210a516d4bc57988ef5","name":"95516fd211e34f5fab7a138c14f52712"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"cb13343170f54d9a8790307075d15808","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"4d6836b8ea6546d0997f29b150183ea4","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"a60fbe894bc541328b55fa57a2eb66da","name":"needit_list","formatType":"text","secure":false,"sensitive":false},{"type":"True/False","id":"4002aa4cc56f481ab24b532e275d7dea","name":"search_again","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"94b940aa83994bcbb39cead874b17ed0","name":"needit_type","formatType":"text","secure":false,"sensitive":false},{"type":"Date/Time","mode":"date","id":"5dffd9eb43f54cd383f31264643d6da9","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"36b0b13294874bc091bca5754992896e","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Short Description","element":"short description"},{"name":"When Needed","element":"when needed"},{"name":"Nothing","element":"nothing"}],"id":"ee32be51dd324f2089aecde477119e04","name":"field_change_selector","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"34783149ae1d456db414281c89124851","name":"change_short_description","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"new_short_description","id":"1d4b6b0c5be446b0a994f3e5c35c4a60","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"37fa42432f60301020d618acf699b61b","domain":"global","topic_type":"STANDARD","channels":[],"id":"42cc4e032f60301020d618acf699b634","name":"_PRVW__d6426207c4a030104a12ca4ce2176b70","key_phrases":["Update NeedIt Records","update NeedIt","NeedIt request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"d41bc6832f60301020d618acf699b6be"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>42cc4e032f60301020d618acf699b634</design_topic_id>
        <name>_PRVW__d6426207c4a030104a12ca4ce2176b70</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-06-09 15:34:07</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>164262072fa0301020d618acf699b674</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_651916_needit_vi">37fa42432f60301020d618acf699b61b</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">37fa42432f60301020d618acf699b61b</sys_scope>
        <sys_update_name>sys_cb_design_topic_164262072fa0301020d618acf699b674</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-06-09 15:34:07</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
